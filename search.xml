<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>使用Hexo搭建个站</title>
    <url>/posts/762bbc7c/</url>
    <content><![CDATA[<h2 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h2><p>记录搭建本站的过程，以及踩过的那些坑。</p>
<p>搭建环境：</p>
<ul>
<li>域名 - 阿里云</li>
<li>Hexo 5.4.0</li>
<li>Git</li>
</ul>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="安装hexo"><a href="#安装hexo" class="headerlink" title="安装hexo"></a>安装hexo</h3><p><code>$ npm install -g hexo-cli</code></p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p><code>hexo init blog</code></p>
<h3 id="创建GitHub仓库"><a href="#创建GitHub仓库" class="headerlink" title="创建GitHub仓库"></a>创建GitHub仓库</h3><ol>
<li>登录GitHub</li>
<li>New repository</li>
<li>设置仓库名为 用户名.github.io</li>
</ol>
<h2 id="本地测试"><a href="#本地测试" class="headerlink" title="本地测试"></a>本地测试</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">hexo n new_blog #新建博文</span><br><span class="line">hexo g	#生成</span><br><span class="line">hexo s	#启动本地预览</span><br></pre></td></tr></table></figure>

<p>浏览器地址：localhost:4000</p>
<h2 id="生成SSH密钥文件"><a href="#生成SSH密钥文件" class="headerlink" title="生成SSH密钥文件"></a>生成SSH密钥文件</h2><figure class="highlight c"><table><tr><td class="code"><pre><span class="line">git config --global user.name <span class="string">&quot;Git用户名&quot;</span></span><br><span class="line">git config --global user.email <span class="string">&quot;Git邮箱&quot;</span></span><br><span class="line">ssh-keygen -t rsa -C <span class="string">&quot;Git邮箱&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="配置GitHub密钥"><a href="#配置GitHub密钥" class="headerlink" title="配置GitHub密钥"></a>配置GitHub密钥</h2><p>这里卡了很久，原因是 GitHub 从2021年8月13日开始不接受用户密码的方式进行 Git 操作验证，于是改为 SSH 连接。</p>
<ol>
<li>GitHub - Setting - SSH and GPG keys</li>
<li>New SSH key</li>
<li>复制上一步生成的公钥 id_rsa.pub 的内容到 Key 中</li>
<li>Add SSH key</li>
<li>测试是否配置成功<br> <code>ssh -T git@github\.com</code></li>
</ol>
<h2 id="Git推送"><a href="#Git推送" class="headerlink" title="Git推送"></a>Git推送</h2><ol>
<li><p>修改 blog 文件夹下的配置文件 _config.yml</p>
 <figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">粘贴GitHub仓库的SSH</span> <span class="string">Clone地址</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">当前分支名（可能为main或master）</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>tips: 修改branch名称</p>
<ul>
<li>仓库Setting - Branches</li>
</ul>
</blockquote>
</li>
<li><p>保存配置文件</p>
</li>
<li><p>安装 Git 部署插件<br> <code>npm install hexo-deployer-git --save</code></p>
</li>
<li><p>清除缓存<br> <code>hexo cl</code></p>
</li>
<li><p>生成<br> <code>hexo g</code></p>
</li>
<li><p>部署<br> <code>hexo d</code></p>
</li>
<li><p>浏览器地址：<u>https://用户名.github.io</u></p>
</li>
</ol>
<h2 id="hexo-d-出错的解决办法"><a href="#hexo-d-出错的解决办法" class="headerlink" title="hexo d 出错的解决办法"></a>hexo d 出错的解决办法</h2><p>可根据报错信息自行尝试。</p>
<ul>
<li><p>取消代理<br>  <code>git config --global --unset http.proxy</code></p>
</li>
<li><p>修改 hosts 文件<br>  <code>92.30.255.113 github.com</code></p>
</li>
<li><p>网络连接问题</p>
<p>  修改缓存大小</p>
<p>  <code>git config --global http.postBuffer 524288000</code></p>
<p>  配置 git 的最低速度和最低速度时间</p>
<p>  <code>git config --global http.lowSpeedLimit 0</code></p>
<p>  <code>git config --global http.lowSpeedTime 999999</code></p>
</li>
</ul>
<h2 id="绑定域名"><a href="#绑定域名" class="headerlink" title="绑定域名"></a>绑定域名</h2><ol>
<li><p>阿里云 - 控制台 - 域名 - 域名列表 - 解析 - 添加记录</p>
</li>
<li><blockquote>
<p>记录类型：A</p>
<p>主机记录：@</p>
<p>解析线路：默认</p>
<p>记录值：192.30.252.154</p>
</blockquote>
</li>
<li><blockquote>
<p>记录类型：A</p>
<p>主机记录：@</p>
<p>解析线路：默认</p>
<p>记录值：192.30.252.153</p>
</blockquote>
</li>
<li><blockquote>
<p>记录类型：CNAME</p>
<p>主机记录：www</p>
<p>解析线路：默认</p>
<p>记录值：填写 用户名.github.io</p>
</blockquote>
</li>
<li><p>GitHub 仓库 - Setting - Pages - Custom domain 填写阿里云域名 - Save</p>
</li>
<li><p>本地 blog 文件夹 - source - 新建文本文件 - 内容填写阿里云域名 - 命名为 CNAME 格式为所有文件 - 保存</p>
</li>
<li><pre><code> hexo cl
 
 hexo g
 
 hexo d
</code></pre>
</li>
<li><p>浏览器输入域名测试访问</p>
</li>
</ol>
]]></content>
      <categories>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
